name: Run Tests

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  php-tests:
    name: ğŸ§ª PHP Syntax Check
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v3
      
    - name: ğŸ˜ Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.1'
        extensions: mysqli, mbstring, pdo_mysql
        
    - name: ğŸ” Check PHP Syntax
      run: |
        find . -name "*.php" -not -path "./vendor/*" -exec php -l {} \; | grep -v "No syntax errors"
        
    - name: âœ… Syntax Check Passed
      run: echo "All PHP files have valid syntax!"
      
  file-structure:
    name: ğŸ“ Check File Structure
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v3
      
    - name: ğŸ” Verify Required Files
      run: |
        echo "Checking required files..."
        
        required_files=(
          "index.php"
          "login.php"
          "config-sample.php"
          "database.sql"
          "README.md"
          "LICENSE"
          "style.css"
        )
        
        for file in "${required_files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "âŒ Missing required file: $file"
            exit 1
          else
            echo "âœ… Found: $file"
          fi
        done
        
        echo "âœ… All required files present!"

